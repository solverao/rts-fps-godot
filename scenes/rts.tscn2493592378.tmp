[gd_scene load_steps=16 format=3 uid="uid://bo4alqq10e4wb"]

[ext_resource type="PackedScene" uid="uid://cf7brgwaxlmud" path="res://addons/3d_rts_camera/rtscam.tscn" id="1_coxth"]
[ext_resource type="Script" uid="uid://jk4piq7hpiow" path="res://scripts/game_manager.gd" id="1_dsjwe"]
[ext_resource type="Script" uid="uid://06ac57g80glq" path="res://scripts/flow_field_3d.gd" id="3_7jm3t"]
[ext_resource type="Script" uid="uid://dmmcwcoij4mw6" path="res://scripts/selection_box_ui.gd" id="4_dsjwe"]
[ext_resource type="Material" uid="uid://btcskr40i5w81" path="res://materials/soil.tres" id="5_wvw1b"]
[ext_resource type="PackedScene" uid="uid://dmf78be6yh1it" path="res://scenes/unit.tscn" id="6_c220y"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_coxth"]

[sub_resource type="Sky" id="Sky_7jm3t"]
sky_material = SubResource("ProceduralSkyMaterial_coxth")

[sub_resource type="Environment" id="Environment_coxth"]
background_mode = 2
background_color = Color(0.08771039, 0.16241324, 0.36877948, 1)
sky = SubResource("Sky_7jm3t")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_dsjwe"]

[sub_resource type="PlaneMesh" id="PlaneMesh_dsjwe"]
material = SubResource("StandardMaterial3D_dsjwe")
size = Vector2(300, 300)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_dsjwe"]
points = PackedVector3Array(-150, 0, -150, -150, 0, 150, 150, 0, -150, 150, 0, 150)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_c220y"]

[sub_resource type="BoxMesh" id="BoxMesh_aqx2a"]
material = SubResource("StandardMaterial3D_c220y")
size = Vector3(5, 5, 5)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_c220y"]
points = PackedVector3Array(2.5, 2.5, 2.5, 2.5, 2.5, -2.5, -2.5, 2.5, 2.5, 2.5, -2.5, 2.5, 2.5, -2.5, -2.5, -2.5, 2.5, -2.5, -2.5, -2.5, 2.5, -2.5, -2.5, -2.5)

[node name="RTS" type="Node3D"]
script = ExtResource("1_dsjwe")
unit_scene = ExtResource("6_c220y")
ground_layer = 5
unit_layer = 5

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.8660254, 0.5, 0, -0.5, 0.8660254, 0, 3, 0)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_coxth")

[node name="FlowField3D" type="Node3D" parent="."]
script = ExtResource("3_7jm3t")
grid_width = 100
grid_depth = 100

[node name="SelectionUILayer" type="CanvasLayer" parent="."]

[node name="SelectionBoxUI" type="Control" parent="SelectionUILayer"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("4_dsjwe")

[node name="Ground" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.023139954, 0.043613434, -0.05112362)
material_override = ExtResource("5_wvw1b")
mesh = SubResource("PlaneMesh_dsjwe")

[node name="StaticBody3D" type="StaticBody3D" parent="Ground"]
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_dsjwe")

[node name="RTScamera" parent="." instance=ExtResource("1_coxth")]

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.4255505, 0, 33.649673)
mesh = SubResource("BoxMesh_aqx2a")

[node name="StaticBody3D" type="StaticBody3D" parent="MeshInstance3D"]
collision_layer = 14
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="MeshInstance3D/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_c220y")
